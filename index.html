<!doctype html>

<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Le Shrubbery</title>
  <meta name="description" content="Des jeux, des bières, et un jardinet.">
  <meta name="author" content="Virgil Roger">
  <link rel="apple-touch-icon" sizes="180x180" href="./splash/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="./splash/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./splash/favicon-16x16.png">
  <link rel="manifest" href="./splash/manifest.json">
  <link rel="mask-icon" href="./splash/safari-pinned-tab.svg" color="#387c28">
  <meta name="theme-color" content="#ffffff">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.min.css">
  <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
  <![endif]-->
  <style>
    *, *:before, *:after {
      box-sizing: border-box;
      font-family: 'Roboto', sans-serif;
      color: #2C2D31;
    }

    header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      width: 100%;
      height: 100%;
    }

    .header__logo {
      position: fixed;
      left: -10vh;
      top: 50%;
      margin-top: -25vh;
      height: 50vh;
      z-index: 100;
    }

    main {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
    }

    .teaser {
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 100%;
      padding: 15px 40px;
      background-image: url('./splash/ulule_bg.png');
      background-color: #87af66;
      background-position: right;
      background-size: contain;
      background-repeat: no-repeat;
    }

    .teaser:before {
      content: '';
      display: block;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      /* background-image: url('./splash/wooden_bg--1920x.jpg'); */
      opacity: 0.15;
    }

    .teaser__logo {
      position: absolute;
      left: calc(50px + 20vh);
      top: 35vh;
      width: 50vw;
    }

    .teaser__text {
      font-weight: 400;
      font-size: 28pt;
      line-height: 42pt;
      position: absolute;
      bottom: 25vh;
      left: calc(55px + 20vh);
    }

    .teaser__text a {
      z-index: 5;
      position: relative;
      display: inline-block;
      text-decoration: none;
      color: #1d5211;
      font-weight: bold;
      height: 60px;
      padding: 10px 25px 10px 0;
      padding-top: 0px;
      transition: all 80ms cubic-bezier(0.215, 0.610, 0.355, 1.000);
    }

    .teaser__text a:before {
      content: '';
      display: block;
      position: absolute;
      left: 0;
      top: 40%;
      width: 0%;
      height: 100%;
      transition: width 350ms cubic-bezier(0.215, 0.610, 0.355, 1.000);      
    }

    .teaser__text a:hover,
    .teaser__text a:focus {
      color: white;
      cursor: pointer;
    }

    .teaser__text a:hover:before,
    .teaser__text a:focus:before {
      background: rgba(56, 124, 40, 1);
      width: 130%;
      z-index: -1;
    }

    .teaser__map {
      visibility: hidden;
      height: 100%;
      width: 100%;
      box-shadow: 0 0 0 100px rgba(0, 0, 0, 0.4);
    }

    .teaser__map-close {
      visibility: hidden;      
      position: fixed;
      top: 30px;
      right: 55px;
      background: rgba(56, 124, 40, 1);
      width: 35px;
      height: 35px;
      border-radius: 35px;
      z-index: 1000;
      transition: all 40ms cubic-bezier(0.215, 0.610, 0.355, 1.000);      
    }

    .teaser__map-close:hover {
      cursor: pointer;
      transform: scale(1.5);
    }

    .teaser__map-close > .icon {
      color: #FFFFFF;
      font-size: 32px;
      line-height: 32px;
      text-align: center;
      font-weight: bold;
    }

    .teaser__map-close > span:not(.icon) {
      display: block;
      text-indent: -9999px;      
    }

    .social {
      position: absolute;
      right: 0;
      top: 0;
      padding: 15px 40px;
      height: 100%;
      width: 380px;
      /* background: rgba(255,255,255, 0.6); */
    }

    .social ul {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      list-style-type: none;
    }

    .social ul li {
      widows: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
    }

    .social__links--fb iframe {
      max-height: 100%;
      max-width: 100%;
    }

    h1, h2, p {
      font-weight: bolder;
    }

    h1 {
      font-size: 48pt;
    }

    h2 {
      font-size: 32pt;
    }

    p {
      font-size: 14pt;
    }

    @media only screen and (max-width: 1000px){
      .teaser {
        background-size: cover;
        background-position: unset;
      }

      .teaser__logo {
        position: absolute;
        left: 0;
        top: 0;
        width: 100vw;
        padding: 15px 50px;
        background: #FFFFFF;
      }

      .teaser__text {
        font-size: 56px;
        line-height: 72px;
        bottom: 35%;
      }

      .teaser__text a {
        top: 15px;
      }

      .social {
        display: none;
      }
    }
  </style>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
  integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
  crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
  integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
  crossorigin=""></script>
</head>

<body>
  <header>
    <img class="header__logo" src="./splash/logo_icon_shrubbery.svg" alt="Le Shrubbery" />
    <h1>
      Le Srubbery
    </h1>
    <h2>
      Des jeux, des bières et un jardinet.
    </h2>
  </header>
  <main>
    <section class="teaser">
      <img class="teaser__logo" src="./splash/logo_text_shrubbery.svg" alt="Le Shrubbery" />
      <p class="teaser__text">
        Bientôt dans votre navigateur,<br/><a href="#juste-ici" title="Le Shrubbery à Villeurbanne" onclick="displayMap()">déjà dans votre ville !</a>
      </p>
      <div id="map" class="teaser__map"></div>
      <button class="teaser__map-close"><span class="icon">&times;</span><span>Fermer la carte</span></button>
    </section>
    <section class="social">
      <ul class="social__links">
        <li class="social__links--fb">
          <iframe src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2Fpg%2FLeShrubbery%2F&tabs=timeline&width=300&height=950&small_header=false&adapt_container_width=true&hide_cover=true&show_facepile=true&appId=424241664262310" width="300" height="950" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowTransparency="true"></iframe>
        </li>
      </ul>
    </section>
  </main>
  <script>
      var map;
      var shrubbery = {lat: 45.769069, lng: 4.865986};
      var shrubIcon = L.icon({
        iconUrl: './splash/logo_icon_shrubbery_marker.svg',

        iconSize:     [40, 200], // size of the icon
        iconAnchor:   [22, 94], // point of the icon which will correspond to marker's location
        popupAnchor:  [-3, -76] // point from which the popup should open relative to the iconAnchor
      });
      function hideMap(event) {
        if (event.target.id !== 'map' && !event.target.className.includes('leaflet-control') && document.querySelector('#map').style.visibility === 'visible') {
          document.querySelector('#map').style.visibility = 'hidden';
          document.querySelector('.teaser__map-close').style.visibility = 'hidden';                 
          document.querySelector('.social').style.visibility = 'visible';
          window.location.hash = '';
        }
      }

      function displayMap() {
        document.querySelector('#map').style.visibility = 'visible';
        document.querySelector('.teaser__map-close').style.visibility = 'visible';        
        document.querySelector('.social').style.visibility = 'hidden';
        var marker = L.marker([45.769069, 4.865986], {
          icon: shrubIcon,
        }).addTo(map);
      }

      function initMap() {
        map = L.map('map').setView([45.769069, 4.865986], window.innerWidth > 900 ? 15 : 16);
        L.tileLayer('https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png', {
          attribution: '<a href="https://wikimediafoundation.org/wiki/Maps_Terms_of_Use">Wikimedia</a>',
          minZoom: 12,
          maxZoom: 18
        }).addTo(map);
      }

      (window.onload = function() {
        document.querySelector('.teaser:not(.teaser__map)').addEventListener('click', hideMap, true);
        initMap();
      });
    </script>
</body>
</html>